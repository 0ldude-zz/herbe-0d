#!/bin/bash

# This gets the current state string cutting out "state:	"
bat_state="$(upower -i `upower -e | grep 'BAT1'` | grep -E state | awk '{print $2}')"

# This gets the integer percentage of current battery capacity cutting out '%'
percent="$(upower -i `upower -e | grep 'BAT1'` | grep 'percentage' | awk '{print $2}' | tr -d '%')"

bat_h='herbe "Unplug me Please," " " "I am too FULL"'
bat_l='herbe "Charge me Please," " " "Gonna SHUTDOWN"'

#if (pc is charging AND battery > 99%) exec bat_h
[ $bat_state = 'charging' ] && [ $percent -gt 99 ] && eval $bat_h

# if (pc isn't charging AND battery < 15%) -> notify
[ $bat_state = 'discharging' ] && [ "$percent" -le 15 ] && eval $bat_l
